# deskew
# PDF 校正工具

## 概述
这是一个用于校正扫描 PDF 文档中倾斜的命令行工具。它使用 PyMuPDF、OpenCV 和其他库来处理 PDF 的每一页并生成校正后的版本，使文本更加易读和视觉上更平衡。

## 功能特点
- 自动检测并校正 PDF 页面中的倾斜。
- 允许自定义 DPI 和背景颜色以进行校正。
- 易于使用的命令行界面，具有交互式提示。
- 默认将校正后的 PDF 输出到与输入文件相同的目录下。

## 安装
要使用此工具，您需要安装 [PDM](https://pdm.fming.dev/latest/) 来管理依赖项。

### 第一步：克隆仓库
```bash
$ git clone https://github.com/tinnci/pdf_deskew.git
$ cd pdf_deskew
```

### 第二步：安装依赖项
使用 PDM 从 `pyproject.toml` 中安装所需的依赖项：
```bash
$ pdm install
```

这将安装所有必要的依赖项，包括 `PyMuPDF`、`OpenCV`、`Pillow`、`deskew` 等。

## 使用方法
使用 PDM 运行脚本来校正 PDF 文件的倾斜：
```bash
$ pdm run python src/deskew_pdf.py
```

### 使用说明
1. **欢迎信息**：您将看到欢迎信息，您可以输入 'h' 获取帮助信息或输入 'q' 退出程序。
2. **输入 PDF 文件**：您需要输入 PDF 文件的路径。
   - 如果文件路径包含空格或特殊字符，请确保正确转义它们。
3. **输出 PDF 文件**：默认情况下，输出的 PDF 文件会保存在输入 PDF 同目录下，文件名会加上 `_矫正` 后缀。您也可以自定义输出路径。
4. **推荐设置**：程序提供了推荐设置，DPI 为 300，背景颜色为 `white`。您可以根据需要自定义这些设置。
5. **确认并处理**：在查看设置之后，您可以确认并继续进行校正处理。

### 示例
```text
欢迎使用 PDF 校准工具！
输入 'h' 查看帮助信息，输入 'q' 退出程序。
请输入您的选择 (按回车继续选择待处理的输入文件): 
请输入输入 PDF 文件的路径 (或按回车选择默认文件): /Users/username/Downloads/document.pdf
请输入输出 PDF 文件的路径 (按回车使用默认值 '/Users/username/Downloads/document_矫正.pdf'): 
是否使用推荐设置？(Y/n): Y
处理进度: 100%|█████████████████████████████████| 42/42 [01:18<00:00,  1.86s/it]
校准后的 PDF 已保存到: /Users/username/Downloads/document_矫正.pdf
```

## 系统要求
- Python 3.12 或更高版本(未执行具体兼容性检查，3.7之类的理论可能可用)
- PDM（用于依赖管理）
- 在 `pyproject.toml` 中列出的库（例如 PyMuPDF、OpenCV、Pillow 等）

## 注意事项
- **文件路径中的特殊字符**：如果输入或输出路径中包含空格或特殊字符，请确保使用引号或转义序列，以避免路径错误。
- **临时文件**：脚本会创建一个临时文件夹来存储中间图像，处理完成后会自动删除该文件夹。

## 开发
如果您希望为此项目做出贡献，可以 fork 此仓库并提交您的更改的 pull request。欢迎任何改进！

## 许可证
该项目使用 MIT 许可证。您可以随意使用和修改它。

## 联系方式
如果您有任何问题或遇到问题，可以在 GitHub 上提交 issue，或者通过 [luoyido@outlook.com] 联系我。
